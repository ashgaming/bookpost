"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[808],{1784:(t,a,e)=>{e.d(a,{c:()=>o});e(9060);var c=e(1560),r=e(2496);const o=t=>{let{url:a}=t;const e=(0,c.i6)();return(0,r.jsx)("div",{className:"w-full flex justify-start my-5",children:(0,r.jsx)("button",{className:"bg-customOrange text-white py-2 px-4 rounded hover:bg-hoverOrange transition-colors duration-200",onClick:()=>{e(a)},children:"Go Back"})})}},2432:(t,a,e)=>{e.d(a,{c:()=>r});e(9060);var c=e(2496);const r=()=>(0,c.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-75 z-50",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-32 w-32 mb-4"}),(0,c.jsx)("h2",{className:"text-white text-xl font-semibold",children:"Loading..."}),(0,c.jsx)("p",{className:"text-white text-sm mt-2",children:"Please wait"})]})})},9072:(t,a,e)=>{e.d(a,{c:()=>r});e(9060);var c=e(2496);const r=t=>{let{Children:a}=t;return(0,c.jsx)("div",{children:a})}},9840:(t,a,e)=>{e.d(a,{e:()=>o});var c=e(9780),r=e(8524);const o=async t=>{const a=new FormData;a.append("image",t);const e=localStorage.getItem("token"),o={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(e)},withCredentials:!0};try{const t=await c.c.post("".concat(r.M,"/api/upload-image/"),a,o);return console.log(t.data),t.data.image_url}catch(n){throw alert("Error uploading image:",n),new Error("Image upload failed")}}},6776:(t,a,e)=>{e.d(a,{Cg:()=>u,Ub:()=>f,Wh:()=>h,YH:()=>x,e6:()=>p,ew:()=>g,gn:()=>m,m8:()=>i,my:()=>d,yU:()=>y});var c=e(9780),r=e(4348),o=e(8524);const n=localStorage.getItem("token")?localStorage.getItem("token"):null,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n)},withCredentials:!0},l={headers:{"Content-type":"application/json"}},p=t=>async a=>{try{a({type:r.S});const{data:e}=await c.c.post("".concat(o.M,"/api/story/create/"),t,s);a({type:r.eY,payload:e})}catch(e){a({type:r.gf,payload:e})}},i=()=>async t=>{try{t({type:r.S_});const a=localStorage.getItem("token")?localStorage.getItem("token"):null,e={headers:{"Content-type":"application/json",...a&&{Authorization:"Bearer ".concat(a)}},withCredentials:!0},{data:n}=await c.c.get("".concat(o.M,"/api/story/list"),e);t({type:r.gr,payload:n})}catch(a){t({type:r.cW,payload:a})}},d=t=>async a=>{try{a({type:r.wp});const{data:e}=await c.c.get("".concat(o.M,"/api/story/").concat(t),l);a({type:r.sT,payload:e})}catch(e){a({type:r.Sw,payload:e})}},y=(t,a)=>async e=>{try{e({type:r.SY});const{data:n}=await c.c.post("".concat(o.M,"/api/story/").concat(t,"/chapter/create/"),a,s);e({type:r.wb,payload:n})}catch(n){e({type:r.ol,payload:n})}},h=t=>async a=>{try{a({type:r.UJ});const{data:e}=await c.c.get("".concat(o.M,"/api/story/").concat(t,"/chapter/list"),l);a({type:r.i3,payload:e})}catch(e){a({type:r.U6,payload:e})}},u=(t,a)=>async e=>{try{e({type:r.Ws});const{data:n}=await c.c.get("".concat(o.M,"/api/story/").concat(t,"/chapter/").concat(a),l);e({type:r.Mn,payload:n})}catch(n){e({type:r.WG,payload:n})}},m=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return async a=>{try{a({type:r.Ah});const{data:e}=await c.c.get("".concat(o.M,"/api/admin/story/list").concat(t?"?page=".concat(t):""),s);a({type:r.I1,payload:e})}catch(e){a({type:r.S6,payload:e})}}},g=t=>async a=>{try{a({type:r.cX});const{data:e}=await c.c.get("".concat(o.M,"/api/admin/story/").concat(t,"/chapter/list"),s);a({type:r._I,payload:e})}catch(e){a({type:r.kf,payload:e})}},x=(t,a,e)=>async n=>{try{console.log(e),n({type:r.aA});const{data:l}=await c.c.put("".concat(o.M,"/api/story/").concat(t,"/chapter/").concat(a,"/update"),e,s);n({type:r.IT,payload:l})}catch(l){n({type:r.We,payload:l})}},f=(t,a)=>async e=>{try{e({type:r.m8});const{data:n}=await c.c.put("".concat(o.M,"/api/story/").concat(t,"/update"),a,s);e({type:r.Ip,payload:n})}catch(n){e({type:r.An,payload:n})}}},9808:(t,a,e)=>{e.r(a),e.d(a,{default:()=>u});var c=e(9060),r=e(624),o=e(1560),n=e(9840),s=e(6776),l=e(3120),p=e(9072),i=e(2432),d=e(4348),y=e(1784),h=e(2496);const u=t=>{let{dispatch:a}=t;const{storyid:e}=(0,o.W4)(),[u,m]=(0,c.useState)(""),g=(0,r.w1)((t=>t.readChapter)),{loading:x,error:f,chapter:w,success:j}=g,b=(0,c.useRef)(null),v=(0,c.useRef)(null),C=(0,c.useRef)(null),N=(0,o.i6)();(0,c.useEffect)((()=>{j&&(alert("Chapter Updated ..."),N("/add/story/".concat(e)),a({type:d.GO}))}),[j]);return x?(0,h.jsx)(l.c,{}):f?(0,h.jsx)(p.c,{children:f}):(0,h.jsxs)("form",{onSubmit:t=>{t.preventDefault();const c={title:b.current.value,chapter:v.current.value,summary:C.current.value,cover:u};a((0,s.yU)(e,c))},className:"form bg-white p-6 my-10 relative max-w-lg mx-auto shadow-lg rounded-lg",children:[x&&(0,h.jsx)(i.c,{}),(0,h.jsx)(y.c,{url:"/list-story"}),(0,h.jsx)("h3",{className:"text-2xl text-gray-900 font-semibold",children:"Write new chapter"}),(0,h.jsx)("div",{className:"flex space-x-5 mt-3",children:(0,h.jsx)("input",{type:"text",placeholder:"Title",className:"border p-2 w-1/2",ref:b})}),(0,h.jsx)("div",{className:"relative max-h-52 aspect-[9/16] bg-gray-200 overflow-hidden left-1/3 align-middle",children:(0,h.jsx)("img",{src:u,alt:"Uploaded",className:"object-cover w-full h-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})}),(0,h.jsx)("div",{className:"flex space-x-5 mt-3",children:(0,h.jsx)("input",{type:"file",onChange:async t=>{t.preventDefault();const a=t.target.files[0];if(a)try{const t=await(0,n.e)(a);m(t)}catch(f){console.error("Image upload failed",f)}},className:"border p-2 w-1/2",accept:"image/*"})}),(0,h.jsx)("h1",{children:"Summary"}),(0,h.jsx)("textarea",{placeholder:"Write Summary here",className:"border p-2 mt-3 w-full",ref:C,maxLength:1e3}),(0,h.jsx)("h1",{children:"Chapter Content"}),(0,h.jsx)("textarea",{placeholder:"Write Chapter here",className:"border p-2 mt-3 w-full",ref:v,maxLength:5e3}),(0,h.jsx)("input",{type:"submit",value:"Update Chapter",className:"w-full mt-6 bg-blue-600 hover:bg-blue-500 text-white font-semibold p-3"})]})}}}]);
//# sourceMappingURL=808.6382581b.chunk.js.map