{"version":3,"file":"static/js/704.c3924825.chunk.js","mappings":"sOAWA,MA2EA,EA3EoBA,KAChB,MAAOC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,CAAC,IAC3BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,IAC7BK,GAAeC,EAAAA,EAAAA,SAAO,GA2B5B,OAzBAC,EAAAA,EAAAA,YAAU,KACNC,IAAAA,OAiBIC,eAAeC,QAAQ,WACvBX,EAAQY,KAAKC,MAAMH,eAAeC,QAAQ,aAhB3BG,WACf,IAAKR,EAAaS,QAAS,CACvBZ,GAAW,GACX,IACI,MAAM,KAAEa,SAAeC,EAAAA,EAAMC,IAAI,GAADC,OAAIC,EAAAA,EAAO,qBAC3CpB,EAAQgB,GACRN,eAAeW,QAAQ,UAAWT,KAAKU,UAAUN,IACjDV,EAAaS,SAAU,CAC3B,CAAE,MAAOX,GACLC,EAASD,EAAMmB,SAAW,wBAC9B,CAAC,QACGpB,GAAW,EACf,CACJ,GAKAqB,EACJ,GACD,KAGCC,EAAAA,EAAAA,KAAA,WAAAC,SAEKxB,GAAUuB,EAAAA,EAAAA,KAACE,EAAAA,EAAM,IACdvB,GACIqB,EAAAA,EAAAA,KAACG,EAAAA,EAAO,CAAAF,SAAE,MAEVG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sEAAqEJ,SAAA,EAChFD,EAAAA,EAAAA,KAAA,MAAI,WAAS,YAAYK,UAAU,wJAAuJJ,SAAC,wBAG3LG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kDAAiDJ,SAAA,EAC5DD,EAAAA,EAAAA,KAAA,OAAKK,UAAU,mGAAkGJ,UAC7GD,EAAAA,EAAAA,KAAA,OACIM,IAAI,GACJC,IAAKjC,EAAKkC,MACVC,QAAUC,IAAMC,EAAAA,EAAAA,GAAiBD,GACjCL,UAAU,uDAKlBD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUJ,SAAA,EACrBD,EAAAA,EAAAA,KAAA,MAAIK,UAAU,iCAAgCJ,SAAE3B,EAAKsC,QACrDZ,EAAAA,EAAAA,KAAA,MAAIK,UAAU,iCAAgCJ,SAAE3B,EAAKuC,YAErDb,EAAAA,EAAAA,KAAA,KAAGK,UAAU,qBAAoBJ,SAC5B3B,EAAKwC,WAGVd,EAAAA,EAAAA,KAACe,EAAAA,GAAI,CACDC,GAAE,SAAAtB,OAAWpB,EAAK2C,KAClBZ,UAAU,+JAA8JJ,SAC3K,kCAOf,C,wDChFlB,MAQA,EARgBiB,IAAiB,IAAhB,SAACjB,GAASiB,EACzB,OACElB,EAAAA,EAAAA,KAAA,OAAAC,SACGA,GACG,C,kCCNT,MAQYU,EAAoBD,IAC7BA,EAAES,OAAOZ,IAAM,iFAAiF,C","sources":["Components/Layout/MostPopular.jsx","Components/Message/Message.js","Helper/ImageUrlCorrect.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport { backend } from '../../Connection/conn';\r\nimport Message from '../Message/Message';\r\nimport Loader from '../Message/Loader';\r\nimport { Link } from 'react-router-dom';\r\nimport { handleImageError } from '../../Helper/ImageUrlCorrect';\r\nimport AOS from 'aos'\r\nimport Aos from 'aos';\r\n\r\n\r\nconst MostPopular = () => {\r\n    const [book, setBook] = useState({});\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const hasLoadedRef = useRef(false); // Ref to track if data has already been loaded\r\n\r\n    useEffect(() => {\r\n        AOS.init()\r\n\r\n        const fetchBooks = async () => {\r\n            if (!hasLoadedRef.current) { // Check if data has been loaded\r\n                setLoading(true);\r\n                try {\r\n                    const { data } = await axios.get(`${backend}/api/mostpopular`);\r\n                    setBook(data);\r\n                    sessionStorage.setItem('popbook', JSON.stringify(data));\r\n                    hasLoadedRef.current = true; // Mark as loaded\r\n                } catch (error) {\r\n                    setError(error.message || 'Failed to fetch books');\r\n                } finally {\r\n                    setLoading(false);\r\n                }\r\n            }\r\n        };\r\n        if (sessionStorage.getItem('popbook')) {\r\n            setBook(JSON.parse(sessionStorage.getItem('popbook')));\r\n        } else {\r\n            fetchBooks();\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <section>\r\n\r\n            {loading ? <Loader /> :\r\n                error ? (\r\n                    <Message>{''}</Message>\r\n                ) : (\r\n                    <div className=\"mx-auto max-w-screen-xl px-4 py-8 sm:px-6 sm:py-12 lg:px-8 lg:py-16\">\r\n                        <h1 data-aos=\"flip-left\" className=\"text-4xl md:text-5xl lg:text-6xl font-extrabold text-center text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500 drop-shadow-lg\">\r\n                            Most Popular Story\r\n                        </h1>\r\n                        <div className=\"grid grid-cols-1 gap-8 lg:grid-cols-2 lg:gap-16\">\r\n                            <div className=\"flex items-center justify-center flex-1 relative w-full overflow-hidden rounded-lg lg:order-last\">\r\n                                <img\r\n                                    alt=\"\"\r\n                                    src={book.cover}\r\n                                    onError={(e) => handleImageError(e)}\r\n                                    className=\"w-[250px] h-[400px] m-5 object-cover rounded-lg\"\r\n                                />\r\n                            </div>\r\n\r\n\r\n                            <div className=\"lg:py-24\">\r\n                                <h2 className=\"text-3xl font-bold sm:text-4xl\">{book.name}</h2>\r\n                                <h2 className=\"text-2xl font-bold sm:text-3xl\">{book.category}</h2>\r\n\r\n                                <p className=\"mt-4 text-gray-600\">\r\n                                    {book.summary}\r\n                                </p>\r\n\r\n                                <Link\r\n                                    to={`/book/${book._id}`}\r\n                                    className=\"mt-8 inline-block rounded bg-webb px-12 py-3 text-sm font-medium text-white transition hover:bg-indigo-700 focus:outline-none focus:ring focus:ring-teal-400\"\r\n                                >\r\n                                    Get Started Reading\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default MostPopular;\r\n","import React from 'react'\r\n\r\nconst Message = ({children}) => {\r\n  return (\r\n    <div>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Message\r\n"," const CorrectUrl = async(url) =>\r\n{\r\n    const con = 'http://127.0.0.1:8000/'\r\n    url = url.slice(32)\r\n    const image = con + url;\r\n    return image;\r\n}\r\n\r\nexport const handleImageError = (e) => {\r\n    e.target.src = 'https://tse1.mm.bing.net/th?id=OIP.rTGLpwoN4zkMisuka5heyQHaHY&pid=Api&P=0&h=180'; // Set your fallback image here\r\n  };"],"names":["MostPopular","book","setBook","useState","loading","setLoading","error","setError","hasLoadedRef","useRef","useEffect","AOS","sessionStorage","getItem","JSON","parse","async","current","data","axios","get","concat","backend","setItem","stringify","message","fetchBooks","_jsx","children","Loader","Message","_jsxs","className","alt","src","cover","onError","e","handleImageError","name","category","summary","Link","to","_id","_ref","target"],"sourceRoot":""}