"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[52],{6792:(e,t,a)=>{a.d(t,{Cm:()=>i,Y5:()=>d,_U:()=>c});var s=a(9780),r=a(8144),n=a(8524);const o=localStorage.getItem("token")?localStorage.getItem("token"):null,l={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(o)},withCredentials:!0},c=()=>async e=>{try{e({type:r.gj});const{data:t}=await s.c.get("".concat(n.M,"/event/list/latest"),l);e({type:r.SA,payload:t})}catch(t){e({type:r.kU,payload:t})}},i=()=>async e=>{try{e({type:r.ch});const{data:t}=await s.c.post("".concat(n.M,"/event/list/anoucement"),l);e({type:r.OW,payload:t})}catch(t){e({type:r.QH,payload:t})}},d=e=>async t=>{try{t({type:r.Kw});const{data:a}=await s.c.post("".concat(n.M,"/event/create/anoucement"),e,l);t({type:r.QX,payload:a})}catch(a){t({type:r.w3,payload:a})}}},8052:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(9060),r=a(1560),n=a(12),o=a(9780),l=a(8524),c=a(2496);const i=()=>{const[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(!1);(0,s.useEffect)((()=>{var a;null!==(a=e[0])&&void 0!==a&&a._id||(async()=>{try{r(!0);const{data:e}=await o.c.get("".concat(l.M,"/api/story/list"));t(e),r(!1),console.log("hit")}catch(e){console.log(e),r(!1)}})()}),[e]);const n=()=>{};return(0,c.jsx)("div",{className:"mt-1 relative rounded-md shadow-sm",children:(0,c.jsxs)("select",{id:"story",onChange:()=>n,className:"block pr-10 shadow appearance-none border-2 border-orange-100 rounded w-full py-2 px-4 text-gray-700 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-orange-500 transition duration-500 ease-in-out",children:[(0,c.jsx)("option",{value:"",children:"select"}),a&&(0,c.jsx)("option",{children:"Loading"}),e.map(((e,t)=>(0,c.jsxs)("option",{value:e._id,children:[" ",e.name," "]},t)))]})})};var d=a(6792),x=a(624),u=a(8144);const m=e=>{let{dispatch:t}=e;const a=(0,x.w1)((e=>e.createAnoucement)),{loading:o,event:l,error:m,success:p}=a,h=(0,r.i6)(),[b,g]=(0,s.useState)(""),[y,v]=(0,s.useState)(""),[j,f]=(0,s.useState)(""),[N,w]=(0,s.useState)(""),[k,C]=(0,s.useState)(""),[S,A]=(0,s.useState)(""),[q,E]=(0,s.useState)(""),[M,D]=(0,s.useState)(""),[B,F]=(0,s.useState)(!1),[H,L]=(0,s.useState)(null),U=e=>{if(e){if(""==N)return alert("message cant be empty...!"),!1;if(""==k)return alert("event date cant be empty...!"),!1;if(""==S)return alert("event time cant be empty...!"),!1;if(""==q)return alert("expire date cant be empty...!"),!1;if(""==M)return alert("expire time cant be empty...!"),!1}return!0};return(0,s.useEffect)((()=>{p&&(t({type:u.Y7}),h("/"))}),[p]),(0,c.jsx)("div",{className:"mx-auto container flex items-center",id:"nav",children:(0,c.jsx)("div",{className:"w-full pt-2 p-4",children:(0,c.jsxs)("div",{className:"mx-auto md:p-6 md:w-1/2",children:[(0,c.jsxs)("div",{className:"flex flex-wrap justify-between",children:[(0,c.jsxs)("h1",{className:"text-2xl text-orange-500 hover:text-orange-500 transition duration-500 p-4",children:[(0,c.jsx)("i",{className:"fas fa-sign-in-alt fa-fw fa-lg"}),"Announcement"]}),(0,c.jsxs)(n.cH,{to:"/",className:"mt-8 text-orange-400 hover:text-orange-600 transition duration-500",children:[(0,c.jsx)("svg",{className:"w-6 h-6 inline-block align-bottom",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Back to Home"]})]}),(0,c.jsx)("div",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:(0,c.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!b||!N||!k||!q)return void alert("Please fill in all required fields!");const a={event:b,story:y,chapter:j,message:N,eventDate:k,eventTime:S,expireDate:q,expireTime:M,coverFile:H};U(a)?t((0,d.Y5)(a)):alert("Something went wrong...!")},children:[(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("label",{htmlFor:"event",className:"block text-gray-700 text-sm font-bold mb-2",children:[(0,c.jsx)("span",{className:"text-red-500",children:"*"})," Event"]}),(0,c.jsxs)("select",{onChange:e=>g(e.target.value),value:b,id:"event",className:"block shadow appearance-none border-2 border-orange-100 rounded w-full py-2 px-4 text-gray-700 mb-3 focus:outline-none focus:bg-white focus:border-orange-500",children:[(0,c.jsx)("option",{value:"select",children:"Select"}),(0,c.jsx)("option",{value:"NewStory",children:"New Story"}),(0,c.jsx)("option",{value:"NewChapter",children:"New Chapter"}),(0,c.jsx)("option",{value:"AboutChapter",children:"About Chapter"}),(0,c.jsx)("option",{value:"AboutStory",children:"About Story"})]}),!b&&(0,c.jsx)("strong",{className:"text-red-500 text-xs italic",children:"Event is required"})]}),"NewChapter"===b&&(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:[(0,c.jsx)("span",{className:"text-red-500",children:"*"})," Story"]}),(0,c.jsx)(i,{setStory:v}),!y&&(0,c.jsx)("strong",{className:"text-red-500 text-xs italic",children:"Story is required"})]}),"select"!==b&&""!==b&&(0,c.jsxs)(c.Fragment,{children:["AboutChapter"===b&&(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:[(0,c.jsx)("span",{className:"text-red-500",children:"*"})," Chapter"]}),(0,c.jsx)("input",{type:"text",value:j,onChange:e=>f(e.target.value),className:"block shadow appearance-none border-2 border-orange-100 rounded w-full py-2 px-4 text-gray-700 mb-3 focus:outline-none focus:bg-white focus:border-orange-500"}),!j&&(0,c.jsx)("strong",{className:"text-red-500 text-xs italic",children:"Chapter is required"})]}),(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:[(0,c.jsx)("span",{className:"text-red-500",children:"*"})," Message"]}),(0,c.jsx)("textarea",{value:N,onChange:e=>w(e.target.value),className:"block shadow appearance-none border-2 border-orange-100 rounded w-full py-2 px-4 text-gray-700 mb-3 focus:outline-none focus:bg-white focus:border-orange-500"}),!N&&(0,c.jsx)("strong",{className:"text-red-500 text-xs italic",children:"Message is required"})]}),(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:[(0,c.jsx)("span",{className:"text-red-500",children:"*"})," Event Date"]}),(0,c.jsx)("input",{type:"date",value:k,onChange:e=>C(e.target.value),className:"block shadow appearance-none border-2 border-orange-100 rounded w-full py-2 px-4 text-gray-700 mb-3"}),(0,c.jsx)("input",{type:"time",value:S,onChange:e=>A(e.target.value),className:"block shadow appearance-none border-2 border-orange-100 rounded w-full py-2 px-4 text-gray-700 mb-3"}),!k&&(0,c.jsx)("strong",{className:"text-red-500 text-xs italic",children:"Event Date is required"})]}),(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:[(0,c.jsx)("span",{className:"text-red-500",children:"*"})," Expire Date"]}),(0,c.jsx)("input",{type:"date",value:q,onChange:e=>E(e.target.value),className:"block shadow appearance-none border-2 border-orange-100 rounded w-full py-2 px-4 text-gray-700 mb-3"}),(0,c.jsx)("input",{type:"time",value:M,onChange:e=>D(e.target.value),className:"block shadow appearance-none border-2 border-orange-100 rounded w-full py-2 px-4 text-gray-700 mb-3"}),!q&&(0,c.jsx)("strong",{className:"text-red-500 text-xs italic",children:"Expire Date is required"})]}),(0,c.jsx)("div",{className:"mb-8",children:(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:[(0,c.jsx)("input",{type:"checkbox",checked:B,onChange:e=>F(e.target.checked),className:"mr-2"}),"Want to upload cover"]})}),B&&(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:[(0,c.jsx)("span",{className:"text-red-500",children:"*"})," Upload Cover"]}),(0,c.jsx)("input",{type:"file",onChange:e=>{return t=e.target.files[0],console.log("files",t),void L();var t},className:"block shadow appearance-none border-2 border-orange-100 rounded w-full py-2 px-4 text-gray-700 mb-3"}),!H&&(0,c.jsx)("strong",{className:"text-red-500 text-xs italic",children:"Cover is required"})]}),(0,c.jsx)("div",{className:"mb-4 text-center",children:(0,c.jsx)("button",{type:"submit",className:"transition duration-500 bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Announce"})})]}),(0,c.jsx)("hr",{})]})})]})})})}}}]);
//# sourceMappingURL=52.0ba2727d.chunk.js.map